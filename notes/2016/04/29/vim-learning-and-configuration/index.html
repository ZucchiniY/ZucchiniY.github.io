<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Vim 配置 - 行走的西葫芦</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dylan Yang" />
    <meta name="description" content="像 IDE 一样使用 Vim" />
    <meta name="keywords" content="Vim, IDE" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify-solarized-light.css" type="text/css">
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  </head>

  <body class="container">
    <div>
      <header class="masthead">
        <form method="get" id="searchform" action="//www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="zucchiniY.github.io">
        </form>
        <h1 class="masthead-title"><a href="/">行走的西葫芦</a></h1>
        <p>世事洞明皆学问，人情练达即文章。</p>
        <ul>
          <li><a href="/blog/"><i class="fa fa-archive"></i>Blog</a></li>
          <li><a href="/notes/"><i class="fa fa-archive"></i>Notes</a></li>
          <li><a href="/tags/"><i class="fa fa-tag"></i>Tags</a></li>
          <li><a href="/about/"><i class="fa fa-user"></i>About</a></li>
          <li><a href="https://github.com/ZucchiniY"><i class="fa fa-github"></i>GitHub</a></li>
          <li><a href="/rss.xml"><i class="fa fa-rss-square"></i>RSS</a></li>
        </ul>
      </header>
    </div>

<div>
<div class="post">
<h1>Vim 配置</h1>

<div id="outline-container-orgb766cff" class="outline-2">
<h2 id="orgb766cff">MinGW 下编译 Vim</h2>
<div class="outline-text-2" id="text-orgb766cff">
<p>
<code>make.exe -f Make_ming.mak PYTHON=C:/Python27 PYTHON_VER=27 DYNAMIC_PYTHON=yes PYTHON3=C:/Python34 PYTHON3_VER=32 DYNAMIC_PYTHON3=yes USERNAME=Turmoil USERDOMAIN=z7ed.tk GUI=yes IME=yes</code>
</p>
</div>
</div>
<div id="outline-container-org7227ad0" class="outline-2">
<h2 id="org7227ad0">大神的 Vim 配置</h2>
<div class="outline-text-2" id="text-org7227ad0">
<ul class="org-ul">
<li><a href="https://github.com/yangyangwithgnu/use_vim_as_ide">《像 IDE 一样使用 vim》</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgfd27e01" class="outline-2">
<h2 id="orgfd27e01">安装 Vim 和 Chinese doc</h2>
<div class="outline-text-2" id="text-orgfd27e01">
<p>
安装之后，gVim 需要解决中文乱码问题，安下面的方案，加入到  <code>_vimrc</code>  中。
</p>
<div class="org-src-container">
<pre class="src src-sh">" 配置多语言环境,解决中文乱码问题
if has("multi_byte")
    " UTF-8 编码
    set encoding=utf-8
    set termencoding=utf-8
    set formatoptions+=mM
    set fencs=utf-8,gbk
    if v:lang =~? '^/(zh/)/|/(ja/)/|/(ko/)'
	set ambiwidth=double
    endif
    if has("win32")
	source $VIMRUNTIME/delmenu.vim
	source $VIMRUNTIME/menu.vim
	language messages zh_CN.utf-8
    endif
else
    echoerr "Sorry, this version of (g)vim was not compiled with +multi_byte"
endif
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc0c9837" class="outline-2">
<h2 id="orgc0c9837">编码的制表与空格：</h2>
<div class="outline-text-2" id="text-orgc0c9837">
<ul class="org-ul">
<li>expandtab，把制表符转换为多个空格，具体空格数量参考 tabstop 和 shiftwidth 变量；</li>
<li>tabstop 与 shiftwidth 是有区别的。tabstop 指定我们在插入模式下输入一个制表符占据的空格数量，linux 内核编码规范建议是 8，看个人需要；shiftwidth 指定在进行缩进格式化源码时制表符占据的空格数。所谓缩进格式化，指的是通过 vim 命令由 vim 自动对源码进行缩进处理，比如其他人的代码不满足你的缩进要求，你就可以对其进行缩进格式化。缩进格式化，需要先选中指定行，要么键入 = 让 vim 对该行进行智能缩进格式化，要么按需键入多次 &lt; 或 &gt; 手工缩进格式化；</li>
<li>softtabstop，如何处理连续多个空格。因为 expandtab 已经把制表符转换为空格，当你要删除制表符时你得连续删除多个空格，该设置就是告诉 vim 把连续数量的空格视为一个制表符，即，只删一个字符即可。通常应将这 tabstop、shiftwidth、softtabstop 三个变量设置为相同值</li>
</ul>
</div>
</div>
<div id="outline-container-org54b57b8" class="outline-2">
<h2 id="org54b57b8">重新处理空格与制表符</h2>
<div class="outline-text-2" id="text-org54b57b8">
<p>
输入命令：retab，可以让 Vim 按定义的规则去重新载入空格
</p>
</div>
</div>
<div id="outline-container-org54a9d48" class="outline-2">
<h2 id="org54a9d48">代码折叠</h2>
<div class="outline-text-2" id="text-org54a9d48">
<p>
za，打开或关闭当前折叠；zM，关闭所有折叠；zR，打开所有折叠。
</p>
</div>
</div>
<div id="outline-container-orgd63ceb5" class="outline-2">
<h2 id="orgd63ceb5">接口文件与实现文件跳转</h2>
<div class="outline-text-2" id="text-orgd63ceb5">
<blockquote>
<p>
a.vim 放到 =VIM/vim74/plugin 路径下
</p>
</blockquote>
<ul class="org-ul">
<li>键入 ;ch 就能在实现文件和接口文件间切换，</li>
<li>键入 ;sch 子窗口中将显示实现文件/接口文件。</li>
<li>键入 ;ch 后，vim 在新 buffer 中打开实现文件 MyClass.cpp，并在当前窗口中显示；</li>
<li>键入 ;ch 后，当前窗口切回接口文件；</li>
<li>键入 ;sch 后，当前窗口分裂了一个子窗口显示实现文件</li>
</ul>
</div>
</div>
<div id="outline-container-org525ed0a" class="outline-2">
<h2 id="org525ed0a">书签设定</h2>
<div class="outline-text-2" id="text-org525ed0a">
<ul class="org-ul">
<li>书签设定。mx，设定/取消当前行名为 x 的标签；m,，自动设定下一个可用书签名，前面提说，独立书签名是不能重复的，在你已经有了多个独立书签，当想再设置书签时，需要记住已经设定的所有书签名，否则很可能会将已有的书签冲掉，这可不好，所以，vim-signature 为你提供了 m, 快捷键，自动帮你选定下一个可用独立书签名；mda，删除当前文件中所有独立书签。</li>
<li>书签罗列。ms，罗列出当前文件中所有书签，选中后回车可直接跳转；</li>
<li>书签跳转。mn，按行号前后顺序，跳转至下个独立书签；mp，按行号前后顺序，跳转至前个独立书签。书签跳转方式很多，除了这里说的行号前后顺序，还可以基于书签名字母顺序跳转、分类书签同类跳转、分类书签不同类间跳转等等</li>
</ul>
</div>
</div>
<div id="outline-container-org15de698" class="outline-2">
<h2 id="org15de698">ctags 使用</h2>
<div class="outline-text-2" id="text-org15de698">
<p>
先将 ctags.exe 配置到某一个 path 路径中，然后在 vim 中输入
</p>
<div class="org-src-container">
<pre class="src src-sh">:set tags+=/data/workplace/example/tags
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd10fa28" class="outline-2">
<h2 id="orgd10fa28">标签的遍历</h2>
<div class="outline-text-2" id="text-orgd10fa28">
<p>
先键入 ctrl-]，若没导航至需要的标签，再键入 &lt;leader&gt;tn 往后或者 &lt;leader&gt;tp 往前遍历即可
</p>
</div>
<div id="outline-container-org89590dd" class="outline-3">
<h3 id="org89590dd">打开一个 C/C++ 源码文件，键入 &lt;leader&gt;tl，将在左侧的 tagbar 窗口中将可看到标签列表： （标签列表） 其中，注意几个特点：</h3>
<div class="outline-text-3" id="text-org89590dd">
<ul class="org-ul">
<li>按作用域归类不同标签。按名字空间 n_foo、类 Foo 进行归类，在内部有声明、有定义；</li>
<li>显示标签类型。名字空间、类、函数等等；</li>
<li>显示完整函数原型；</li>
<li>图形化显示共有成员（+）、私有成员（-）、保护成员（#）；</li>
</ul>
<p>
操作：如果从标签找源码，选择对应标签后回车即可跳至源码中对应标签位置；如果从源码找标签，在源码中暂停几秒鼠标和键盘操作，tagbar 子窗口中对应标签将高亮；每次保存文件时或者切换到不同代码文件时 tagbar 自动调用 ctags 更是标签数据库；tagbar 有两种排序方式，一是按标签名字母先后顺序、一是按标签在源码中出现的先后顺序，在 .vimrc 中我配置选用后者，键入 s 切换不同不同排序方式
</p>
</div>
</div>
</div>
<div id="outline-container-org858b3f9" class="outline-2">
<h2 id="org858b3f9">快速注释</h2>
<div class="outline-text-2" id="text-org858b3f9">
<p>
常用操作：
</p>

<p>
&lt;leader&gt;cc，注释当前选中文本，如果选中的是整行则在每行首添加 //，如果选中一行的部分内容则在选中部分前后添加分别 /*、*/；
&lt;leader&gt;cu，取消选中文本块的注释。
</p>
</div>
</div>
<div id="outline-container-org9cdc30c" class="outline-2">
<h2 id="org9cdc30c">Vim 一些常用的快捷键操作</h2>
<div class="outline-text-2" id="text-org9cdc30c">
</div>
<div id="outline-container-orgd0c0ffa" class="outline-3">
<h3 id="orgd0c0ffa">读入外部文件</h3>
<div class="outline-text-3" id="text-orgd0c0ffa">
<div class="org-src-container">
<pre class="src src-sh">:read readme.md
</pre>
</div>
</div>
</div>
<div id="outline-container-org82f7411" class="outline-3">
<h3 id="org82f7411">读入命令的结果</h3>
<div class="outline-text-3" id="text-org82f7411">
<div class="org-src-container">
<pre class="src src-sh">:read !command
:read !ls -al
</pre>
</div>
</div>
</div>
<div id="outline-container-org213fd68" class="outline-3">
<h3 id="org213fd68">切换到上次修改的位置</h3>
<div class="outline-text-3" id="text-org213fd68">
<div class="org-src-container">
<pre class="src src-sh"># normal 模式下
g;
</pre>
</div>
</div>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2016-04-29</span>
        <span title="last modification date" class="post-info">2018-02-04</span>
        <span title="tags" class="post-info"><a href="/tags/vim/">Vim</a></span>
        <span title="author" class="post-info">Dylan Yang</span>
      </div>
      <script src="//code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>
      <script src="/media/js/main.js"></script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.x (<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:banshiliuli1990 &lt;at&gt; sina &lt;dot&gt; com">Dylan Yang</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
